# Quick CLI Deployment Guide

## Prerequisites
âœ… Railway CLI: v4.5.4 (installed)
âœ… Vercel CLI: v44.2.8 (installed)
âœ… GitHub repo: https://github.com/OPISGUY/scn-esg (live)

## Quick Commands for Deployment

### Step 1: Deploy Backend to Railway
```powershell
# Navigate to backend
cd backend

# Login to Railway (opens browser)
railway login

# Create new project or link existing
railway link

# Set environment variables
railway variables set DJANGO_SECRET_KEY="your-super-secret-key-here-min-50-chars"
railway variables set DJANGO_DEBUG="False"
railway variables set GOOGLE_AI_API_KEY="your-gemini-api-key"

# Add PostgreSQL database
railway add postgresql

# Deploy
railway up

# Run initial setup
railway run python manage.py migrate
railway run python manage.py collectstatic --noinput
railway run python manage.py createsuperuser
railway run python manage.py sync_esrs_datapoints --source=local

# Get your backend URL
railway status
```

### Step 2: Deploy Frontend to Vercel
```powershell
# Go back to project root
cd ..

# Login to Vercel (opens browser)
vercel login

# Set environment variables
vercel env add VITE_API_URL production
# Enter your Railway backend URL when prompted

vercel env add VITE_APP_NAME production
# Enter: SCN ESG Platform

vercel env add VITE_ENVIRONMENT production
# Enter: production

# Deploy to production
vercel --prod
```

### Step 3: One-Command Deployment (Advanced)
```powershell
# Run the automated deployment script
./deploy.ps1 "YOUR_GOOGLE_AI_API_KEY"
```

## Manual Commands Breakdown

### Railway Commands
```powershell
railway login                    # Authenticate
railway projects                 # List your projects
railway link                     # Link to existing project
railway status                   # Check deployment status
railway logs                     # View application logs
railway variables               # List environment variables
railway variables set KEY=value # Set environment variable
railway up                      # Deploy current directory
railway run "command"           # Run command in deployed environment
railway domain                  # Manage custom domains
railway delete                  # Delete project
```

### Vercel Commands
```powershell
vercel                          # Deploy current directory
vercel --prod                   # Deploy to production
vercel login                    # Authenticate
vercel projects list            # List your projects
vercel env list                 # List environment variables
vercel env add KEY              # Add environment variable
vercel domains list             # List domains
vercel logs                     # View deployment logs
vercel inspect URL              # Get deployment details
vercel remove PROJECT           # Remove project
```

## Environment Variables Required

### Backend (Railway)
```
DJANGO_SECRET_KEY=your-super-secret-key-here-min-50-chars
DJANGO_DEBUG=False
GOOGLE_AI_API_KEY=your-gemini-api-key
DATABASE_URL=postgresql://... (auto-generated by Railway)
```

### Frontend (Vercel)
```
VITE_API_URL=https://your-backend.railway.app
VITE_APP_NAME=SCN ESG Platform
VITE_ENVIRONMENT=production
```

## Troubleshooting

### Common Railway Issues
```powershell
# If deployment fails
railway logs

# If database connection fails
railway variables
# Check DATABASE_URL is set

# If build fails
railway run pip install -r requirements.txt
railway run python manage.py check
```

### Common Vercel Issues
```powershell
# If build fails
vercel logs

# If environment variables are missing
vercel env list
vercel env add MISSING_VAR production

# If API calls fail
# Check VITE_API_URL matches your Railway backend URL
```

## Post-Deployment Checklist
- [ ] Backend health check: `https://your-backend.railway.app/api/v1/health/`
- [ ] Frontend loads: `https://your-frontend.vercel.app`
- [ ] API connection works (test login/signup)
- [ ] Admin panel accessible: `https://your-backend.railway.app/admin/`
- [ ] ESRS datapoints loaded
- [ ] Custom domain configured (optional)

## URLs After Deployment
- **Frontend**: `https://your-project.vercel.app`
- **Backend API**: `https://your-project.railway.app`
- **Admin Panel**: `https://your-project.railway.app/admin/`
- **API Docs**: `https://your-project.railway.app/api/v1/`

---

**Ready to deploy? Run these commands in order or use the automated script!** ðŸš€
